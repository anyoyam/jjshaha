var asyncFun=function(n,r){var t,o=[],r=r||window,e="throw",u=function(n,r){return typeof n===(r||"function")},l=function(n,r){t.retn=n},f=function(n,r){var t=o.shift()||l;return t(n,r)},i=function(n){if(u(e))return e.call(r,n);if("log"!=e)throw new Error(n);u(console,"object")&&u(console.error)?console.error(n):alert(n)};return u(n)&&o.push(n),t={retn:null,level:function(n){return e=u(n)?n:"log"==n?"log":"throw",this},then:function(n){var t=this;return u(n)&&o.push(function(o,e){r=e||r,t.retn=o||null,n.call(r,f,i,t.retn)}),t},run:function(){var n=o.shift(),t=o.shift()||l,e=[t,i];if(arguments.length>0)for(var u=0;u<arguments.length;u++)e.push(arguments[u]);n.apply(r,e)}}};"undefined"!=typeof module&&(module.exports=asyncFun);