# Drupal学习

## 概述

### 灵活性，遇见简单性

解决内容管理争取平衡灵活性与简单性。如果一个解决方案太简单，那么它也只能为一种单一的目的而使用；但如果它又足够的灵活，那么新手学习它有时会特别难。

大多数内容管理系统就像一个玩具卡车 ———— 特定的关于它将如何被使用的假设已经被创建，而且这些假设还很难被重写。内容管理框架，从另一方面说，更像一些制作玩具必须的原始材料 ———— 没有任何如何使用它们的假设，它们的创建者需要专家级的技术知识为了最终创建任何东西。

Drupal是一个为没有技术的用户，无论是需要简单的还是灵活的人，设计的完美的内容管理解决方案。它实现了通过模块化建站。不像其他CMS，Drupal不是一个预制的玩具工厂，相当于一个轮子，挡风玻璃，车轴，框架等等的收集器，这样玩具的制造者可以很容易的将它们链接到一起。使用Drupal，制造者可以创建一个“玩具卡车”，同时ta还可以简单的建一个玩具飞机，潜艇或者机器人。为了这个，Drupal同时被作为一个内容管理系统和一个内容管理框架 ———— 一个统一系统，努力包含两者的长处，减少弊端。

所以，无论一个建站者想要建一个新闻站，在线商城，社交网络，博客，wiki，或者其他，问题只需要考虑组合正确相关的模块。唯一的限制是创造者的想象力。

### Drupal in action

为了阐明Drupal和其他CMS系统的区别，让我们来一起考虑一个新站。想在新站上发布新文章，想要在主页上面有一块展示最近的5条新闻。接下来，你决定要添加一个博客区，还想在首页要一个最新5条博文的链接清单。

如果你使用一个传统的CMS，首先你需要安装一个管理新闻文章的插件，放一个短的推荐广告在首页。下一步，你需要安装一个追踪最新博文的插件，并将插件产生的一个列表放到首页。每个插件只负责追踪管理特定的一种内容，而且他们之间相对是独立的。

但是，当你有一个聪明的融合了这两种功能，根据贡献者的激活情况排序展示一个最新博文的列表，这时会发生什么？如果你运气不好的使用一个“玩具卡车”的CMS，或者你需要雇佣一个程序员从乱写乱画中写一个自定义的插件。

.......

### How Drupal does it.

人们通常认为一个网站就是一个静态页面，也许有些博客或新闻功能的引擎（丢一些东西进去，然后再展示出来throw in to round it out）的收集器。当他们去管理他们的站时，他们会思考他们要编辑的像树一样分层的页面上的术语。

然而，Drupal，在相同观点上将大多数内容类型当做一个变量：一个节点（同一个时刻有更多点在它上面）。静态页面，博文，新闻（一切可能的节点类型）都是同样的方式保存起来，站点的导航结构通过编辑菜单，视图（文章的列表），还有块（侧边内容通常是一些不同站的链接）被独立分开设计。

它更像是在遵从标准页面coding的分离 ———— XHTML提供信息的主要结构，CSS觉定它如何展示。在Drupal中，节点掌控与博文有关的（比如，标题，内容，作者，日期）整个结构信息，或者一个新闻（标题，内容，发表日期，撤下日期），但是菜单系统，和分类系统（内容的标签）、视图一样，创建一个信息结构。最后，主题系统，与展示模块在一起像控制面板，控制着所有的这些如果展示给网站的访客。

当这些层都分离了，你可以提供一个完全不同的导航或者根据不同人不同的需求和角色展示不同的内容。页面可以进行不同的分组，不同的排序，而且以前的功能或者版本可以根据需要展示或隐藏。

### Nodes: The secret to Drupal's flexibility

我们不经常谈论“Nodes”，但自从它们成为Drupal的核心设计是，它们值得更深入的研究。从根本上来说，一个节点就是一系列相关信息的集合。当我们创建一篇新博文时，你不仅仅只定义它的主体文本，还包括它的标题，内容，作者的链接，创建的时间，标签等等。这些元素中的一些在节点需要展示时有可能在主题层显示出来。其他是一些多媒体数据，用来在节点完全展示后控制用，比如标签或者发布状态。


作为前提声明，没有限制你使用单一的方式展示你网站的内容。你可以定义很多导航方案，自定义主题，或者设计站点。你可以浏览一些其他人制作的主题 [Theme](https://www.drupal.org/project/Themes)。

评论也体现了Drupal的处理方式。评论作为一个博客系统中典型的思想，但是在Drupal中没有隔离的“博客系统”。Drupal简单巧妙操纵节点将功能作用在人们普遍熟知的博客中。评论可以在任何内容类型（或节点）上被启用，———— 比如在博文，新闻，书页（提供一个简单的wiki功能）或任何你可能创建的类型。Drupal模块化的系统唯一的限制是建站者的想象力。


### Collaborative at the core 核心的运作

创建一个信息网站，一对多的传播信息是大多数CMS系统做了功能范围之外正确的事情。然而，Drupal能脱引而出，是通过允许网站的用户创建内容并且互动，从一对多进化为多对多。

使用一些CMS，你可以建博客，可以安装插件去管理用户社区。但是当你想要给你每一个用户提供一个个人的博客时会发生什么，排序他们的文章那样以至于他们可以用他们自己的皮肤独特地展示，同时也可以生成各个博客的时事摘要，热门清单，加上查看详情的链接，定制的用户档案，在比如你想用汇聚这些博客信息用一个论坛，一个维基百科系统，或者用户标记图片的相册，在一个传统的CMS处理信息导致这些非常难去实现。对比来看，使用Drupal的方式可以很容易的建立这些，并且整个过程非常好处理。

Drupal完全是从头到尾的可设计，所以创建者可以将内容创建员，甚至站点的管理员给用户。创建者要做的所有事仅仅只是定义用户的权限，哪些用户做什么，然后所有人就可以开始一起协同工作了。

### Get started quickly, customize extensively 快速的开始，广泛的定制

Drupal有不可思议的多样性，同时安装时非常的简单。通过简单的FTP上传，一些简单的网站基本配置，连接你的数据库，你可以在一个小时内建立并运行起你的第一个Drupal站。

选一个主题，添加一些内容。你想要让游客登陆吗？你可以通过开启或关闭用户验证的开关。想要开启一些内置的工具？你需要开启“论坛”；开启节点类型的评论；开启类似wiki的书页模块；创建论坛和调查；使用标签系统给你站点的文章分类，分层次的分类或者灵活表单标记。

你想要将你自己的皮肤应用网站上吗？Drupal的主题系统使用了很小的php片段，你可以在你的设计中合适的地方插入将要用动态内容替换的占位符。Drupal会生成标准的XHTML。没有老旧的table，而且代码整洁，不开玩笑。

### The Drupal flow

如果你想要深入Drupal，那么你需要理解系统每层之间的数据信息如何流动的。总共有5个主要的层。

![The Drupal flow](https://www.drupal.org/files/drupal_flow_0.gif)

5）TEMPLATE 模板
4）USER PERMISSIONS 用户权限
3）BLOCKS & MENUS 块还有菜单
2）MODULES 模块
1）DATA（NODES, ETC）数据

1. 系统的最底层是一个节点的收集器 ———— 数据池。在网站要显示任何东西之前，必须是一个作为数据的输入。
2. 下一层是模块的工作区域了。模块是部分Drupal核心（用来运作Drupal）功能插件，也有一些是由Drupal社区成员创建分享出来的功能插件。模块时建立在Drupal核心的功能之上，允许你自己处理你自己的节点类型的数据；建立电子商务；程序控制的排序病展示内容（根据你定义的过滤器控制定义输出）；等等。Drupal的模块仓库有成千上万种不同的模块而且还是飞速增长。
3. 在下一层种，我们发现了块和菜单。**块**通常用来提供模块的输出或者任何你想要展示的东西，然后替换模板（主题）布局上不同的位置（区域）。块可以被配置成各种不同方式的展示，例如只展示在某个定义的页面上，或者只给某个定义的用户显示。**菜单**在Drupal中是导航，用来定义每一个菜单路径（相对URL）所对应的文章入口。菜单是Drupal的核心元素，提供链接地址给所有Drupal创建的页面。
4. 下一个是用户权限。这里是配置的设置决定那种类型的用户允许操作或者查看的地方。权限是定义的各种角色，并且依次将用户分配到这些角色中，为了在定义的权限中允许他们。
5. 最顶部的层是网站的主题（皮肤）。主要是有XHTML和CSS构成，包含一些PHP变量在里面，这样Drupal生成的内容就可以替换合适的标记点。每个主题还会包含一组方法集用来重载模块中的标准方法为了在模块输出它们标记的过程提供完整的控制。模板也可能根据用户的权限在运行时被分派。

这种从底部到顶部的流向控制着Drupal的工作。是不是有一些你想要的功能没有展示出来？也许是因为你上传的模块没有被激活，这使得所有东西都顺流而下，而这会导致下游的任何东西都不起作用（就像上面图标中的A一样）。

也许模块已经被安装并且已激活，但是你还是看不到你想要的。是不是你忘记放置块了，就和B一样，或者你的用户权限设置与你想要的冲突了，或者你的用户没有被设置可以看到输出内容就像C一样。

另外，就像早前提到的，要这种细微控制整个XHTML模块输出的细节需要理解这种流模式。是不是使用一个模块就可以完全的做到你想要的，只是想标记代码有一点点不同？也许你想让它使用不同的标记，或者你想指派一个css类给某个东西。实现这些可以通过从模块中拷贝出输出的方法，然后把它放到你主题的方法文档上。修改那里的代码，当系统运行到输出时，会发现你自定义的方法然后替代原来的。

## 设置Cron计划任务

配置好的计划任务可以完成以下功能：

- 搜索模块为网站内容创建索引
- 聚合模块中检索feed
- Ping模块通知其更新站
- 系统模块中平台的日常维护任务，例如日志清理
